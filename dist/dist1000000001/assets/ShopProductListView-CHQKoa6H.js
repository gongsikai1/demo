import{d as B,r as o,b as U,o as l,c as _,f as n,w as t,g as A,t as a,F as N,h as v,e as w,i,u as E,k as T,j as f}from"./index-DpYZfZlD.js";import{l as C}from"./lodash-BoxlOHhu.js";import{A as s}from"./index-BHndqmlX.js";const y=["href"],D=["src"],$=B({__name:"ShopProductListView",setup(P){E();const p=T(),k=o("");o(""),o([]),o({});const x=o([]),g=o([]);o("first");const h=o({}),m=o({});localStorage.getItem("token");const S=()=>{s.BANNER.LIST({banner_uuid:"88787056-7ac6-4fde-bf8e-2f1e830a7bc8"}).then(e=>{console.log("res",e),x.value=e})},I=()=>{s.PRODUCT.LIST({is_home:!1,shop_uuid:p.params.uuid}).then(e=>{console.log("res",C.chunk(e,4)),g.value=C.chunk(e.map(u=>({...u,title:decodeURIComponent(u.title),image_url:decodeURIComponent(u.image_url)})),4)})},L=()=>{s.USER.NAME({uuid:p.params.uuid}).then(e=>{console.log("res",e),h.value=e})},b=()=>{s.FEN.COUNT({concern_uuid:p.params.uuid}).then(e=>{m.value=e,console.log("res",e)})};return U(()=>{k.value=localStorage.getItem("token"),console.log("the component is now mounted."),console.log("API",s),S(),I(),L(),b()}),(e,u)=>{const r=f("el-col"),c=f("el-row"),F=f("el-card");return l(),_("main",null,[n(c,null,{default:t(()=>[n(r,null,{default:t(()=>[A(a(decodeURIComponent(h.value.name||""))+" "+a({cn:"粉丝数：",en:"Number Of Followers: "}[e.$store.state.lang])+a(m.value.count===void 0?"-":m.value.count),1)]),_:1})]),_:1}),(l(!0),_(N,null,v(g.value,R=>(l(),w(c,null,{default:t(()=>[(l(!0),_(N,null,v(R,d=>(l(),w(r,{span:6},{default:t(()=>[i("a",{href:`/product/${d.uuid}`,style:{margin:"0 20px"}},[n(F,{style:{"max-width":"480px"}},{default:t(()=>[i("img",{src:d.image_url,style:{width:"100%"},class:"el-image",width:"263px",height:"263px"},null,8,D),n(c,null,{default:t(()=>[n(r,null,{default:t(()=>[i("p",null,a(d.title),1)]),_:2},1024)]),_:2},1024),n(c,null,{default:t(()=>[n(r,null,{default:t(()=>[i("p",null,"¥ "+a(Number.parseFloat(d.price/100).toFixed(2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,y)]),_:2},1024))),256))]),_:2},1024))),256))])}}});export{$ as default};
