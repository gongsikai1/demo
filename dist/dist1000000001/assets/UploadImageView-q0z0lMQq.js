import{d as B,r as i,o as f,c as v,f as t,w as n,i as s,B as _,a as N,F as P,E as h,j as m,M as D,N as I,O as $,t as z}from"./index-DpYZfZlD.js";const A=["src"],E={class:"el-upload-list__item-actions"},M=["onClick"],S=["onClick"],j=["src"],G=B({__name:"ImageUpload",emits:["send-data"],setup(C,{emit:r}){const c=i(""),o=i(!1),p=i(!1);i();const u=i([]),g=r,V=(e,l,d)=>{console.log("response",e,l,d),g("send-data",e.data.url)},k=e=>{console.log(e);const l=u.value.indexOf(e);l!==-1&&(u.value.splice(l,1),u.value.length===0&&g("send-data",""))},x=e=>{c.value=e.url,o.value=!0},b=e=>e.type!=="image/jpeg"&&e.type!=="image/png"?(h.error("Avatar picture must be JPG or PNG format!"),!1):e.size/1024/1024>2?(h.error("Avatar picture size can not exceed 2MB!"),!1):!0;return(e,l)=>{const d=m("el-icon"),U=m("el-upload"),w=m("el-dialog");return f(),v(P,null,[t(U,{"file-list":u.value,"onUpdate:fileList":l[0]||(l[0]=a=>u.value=a),action:"http://localhost:3003/api/image/upload","list-type":"picture-card","auto-upload":!0,"on-success":V,"before-upload":b},{file:n(({file:a})=>[s("div",null,[s("img",{class:"el-upload-list__item-thumbnail",src:a.url,alt:""},null,8,A),s("span",E,[s("span",{class:"el-upload-list__item-preview",onClick:y=>x(a)},[t(d,null,{default:n(()=>[t(_(D))]),_:1})],8,M),p.value?N("",!0):(f(),v("span",{key:0,class:"el-upload-list__item-delete",onClick:y=>k(a)},[t(d,null,{default:n(()=>[t(_(I))]),_:1})],8,S))])])]),default:n(()=>[t(d,null,{default:n(()=>[t(_($))]),_:1})]),_:1},8,["file-list"]),t(w,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=a=>o.value=a)},{default:n(()=>[s("img",{"w-full":"",src:c.value,alt:"Preview Image"},null,8,j)]),_:1},8,["modelValue"])],64)}}}),L={id:"app"},F={__name:"UploadImageView",setup(C){const r=i(""),c=o=>{r.value=o};return(o,p)=>(f(),v("div",L,[t(G,{onSendData:c}),s("p",null,"上传的图片地址: "+z(r.value),1),p[0]||(p[0]=s("p",null,"上传的图片预览：",-1))]))}};export{F as default};
