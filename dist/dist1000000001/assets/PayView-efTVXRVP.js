import{d as w,r as u,K as R,b as k,o as c,c as m,i as _,f as e,w as l,t as i,g as I,e as C,a as y,l as P,k as S,j as p}from"./index-DpYZfZlD.js";import{A as s}from"./index-BHndqmlX.js";const V={class:"about"},q={key:0},x={key:1},O=w({__name:"PayView",setup(B){P();const r=S();u({});const A=u(""),g=u([]),v=u(""),d=u({}),D=u({}),f=u(null),h=()=>{s.CART.LIST().then(o=>{console.log("res",o),g.value=o})},E=()=>{console.log("route",r),s.PAY.DETAIL({uuid:r.params.uuid}).then(o=>{console.log("res",o),A.value=o.amount,s.ADDRESS.DETAIL({uuid:o.address_uuid}).then(a=>{console.log("res API.ADDRESS.DETAIL",a),d.value=a,s.PAY.ADD({uuid:r.params.uuid}).then(t=>{console.log("res",t),v.value=t.code_url})})})},L=()=>{f.value=setInterval(()=>{s.PAY.DETAIL({uuid:r.params.uuid}).then(o=>{console.log("detailRes",o),s.ORDER.DETAIL({uuid:o.order_uuid}).then(a=>{console.log("API.ORDER.DETAIL res",a),D.value=a,a.status===1&&clearInterval(f.value)})})},1e3)};return R((o,a,t)=>{clearInterval(f.value),t()}),k(()=>{h(),E(),L()}),(o,a)=>{const t=p("el-col"),n=p("el-row"),T=p("vue-qrcode");return c(),m("div",V,[_("div",null,[e(n,null,{default:l(()=>[e(t,null,{default:l(()=>[_("p",null,"下单地址："+i(d.value.full_address),1)]),_:1})]),_:1}),e(n,null,{default:l(()=>[e(t,null,{default:l(()=>[_("p",null,"下单人："+i(d.value.name),1)]),_:1})]),_:1}),e(n,null,{default:l(()=>[e(t,null,{default:l(()=>[_("p",null,"下单号码："+i(d.value.phone),1)]),_:1})]),_:1}),e(n,null,{default:l(()=>[e(t,null,{default:l(()=>[I(" 应付金额 "+i(Number.parseFloat(A.value/100).toFixed(2))+" 元 ",1)]),_:1})]),_:1})]),D.value.status?(c(),m("div",x,[e(n,{class:"qrcode-row"},{default:l(()=>[e(t,null,{default:l(()=>a[0]||(a[0]=[I(" 支付成功 ")])),_:1})]),_:1})])):(c(),m("div",q,[e(n,{class:"qrcode-row"},{default:l(()=>[e(t,null,{default:l(()=>[v.value?(c(),C(T,{key:0,value:v.value,width:"300"},null,8,["value"])):y("",!0)]),_:1})]),_:1})]))])}}});export{O as default};
